<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Guía de Voto 2025 - Carolina</title>
<style>
body{font-family:Arial,sans-serif;background:#eef2f5;color:#333;padding:15px;}
.container{max-width:720px;margin:auto;background:#fff;padding:20px;border-radius:8px;}
h1,h2{text-align:center;color:#1a73e8;}
button{width:100%;padding:12px;margin:8px 0;border:none;border-radius:6px;background:#1a73e8;color:#fff;cursor:pointer;font-size:1em;}
.item{background:#f9f9f9;padding:12px;margin:10px 0;border-radius:6px;}
.item img{max-width:100%;border-radius:6px;margin-top:8px;}
.back{margin-top:12px;}
.hidden{display:none;}
a{word-break:break-word;color:#1a73e8;}
#mapa svg{width:100%;height:auto;margin:10px 0;}
</style>
</head>
<body>
<div class="container">
<h1>Guía de Voto 2025 - Carolina</h1>

<!-- MENU -->
<div id="menu">
  <h2>Seleccioná tu distrito</h2>
  <div id="mapa">
    <!-- Mapa de Santa Cruz (simplificado) -->
    <svg viewBox="0 0 600 400">
      <rect x="50" y="50" width="200" height="120" fill="#cce5ff" stroke="#1a73e8" id="LasHeras"/>
      <rect x="300" y="50" width="200" height="120" fill="#cce5ff" stroke="#1a73e8" id="RioGallegos"/>
    </svg>
  </div>
  <button onclick="setTema('Educación')">Elegir por tema</button>
</div>

<!-- PASO TEMA -->
<div id="stepTema" class="hidden">
  <h2>¿Qué tema te importa?</h2>
  <button onclick="setTema('Educación')">Educación</button>
  <button onclick="setTema('Economía')">Economía</button>
  <button onclick="setTema('Seguridad')">Seguridad</button>
  <button onclick="setTema('Salud')">Salud</button>
</div>

<!-- FILTRO GÉNERO -->
<div id="stepGenero" class="hidden">
  <h2>Filtro por género</h2>
  <button onclick="filtrar('t')">Todo</button>
  <button onclick="filtrar('f')">Femenino</button>
  <button onclick="filtrar('m')">Masculino</button>
</div>

<!-- RESULTADOS -->
<div id="resultado" class="hidden">
  <h2>Resultados</h2><div id="items"></div>
  <button class="back" onclick="resetAll()">◀ Volver al inicio</button>
</div>

<!-- FORM FEEDBACK -->
<h2>Dejanos tu opinión</h2>
<iframe src="https://docs.google.com/forms/d/e/REAL_FORM_ID/viewform?embedded=true" width="100%" height="600"></iframe>
</div>

<script>
// Datos de ejemplo, ampliá con todos los diputados
const data = {
  LasHeras: {nombre:'Javier S. Jara',genero:'m',distrito:'Las Heras',bloque:'Por Santa Cruz',
    bio:'Vicepresidente 1° de la Cámara...',
    posiciones:{Educación:'Recursos a escuelas rurales',Economía:'Apoya PyMEs',Seguridad:'Presencia policial urbana',Salud:'"..."},
    foto:'https://upload.wikimedia.org/.../Javier_Jara.jpg',
    rss:'https://www.tiempofm.com/rss'}
};

let seleccionado = 'mapa', tema = '', genero='';

// Interacciones
document.querySelectorAll('#mapa svg rect').forEach(el=>el.addEventListener('click',()=>{
  seleccionado = el.id; document.getElementById('stepTema').classList.remove('hidden');
  document.getElementById('menu').classList.add('hidden');
}));

function setTema(t){
  tema = t; document.getElementById('stepTema').classList.add('hidden');
  document.getElementById('stepGenero').classList.remove('hidden');
}

function filtrar(g){
  genero = g; document.getElementById('stepGenero').classList.add('hidden');
  const c = data[seleccionado];
  if(c && (g==='t'||c.genero===g)){
    showCandidate(c);
  } else document.getElementById('items').innerHTML='<p>No hay coincidencias</p>';
  document.getElementById('resultado').classList.remove('hidden');
}

function showCandidate(c){
  const div = document.createElement('div'); div.className='item';
  div.innerHTML = `<h3>${c.nombre}</h3>
    <p><strong>Distrito:</strong> ${c.distrito} | <strong>Bloque:</strong> ${c.bloque}</p>
    <p>${c.bio}</p><p><strong>${tema}:</strong> ${c.posiciones[tema]||'N/A'}</p>
    <img src="${c.foto}" alt="${c.nombre}"/>
    <p><strong>Noticias:</strong></p><ul id="rss-${c.distrito}"><li>Cargando...</li></ul>`;
  document.getElementById('items').appendChild(div);
  loadRSS(c.rss, `rss-${c.distrito}`);
}

function loadRSS(url, elid){
  fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(url)}`)
  .then(r=>r.json()).then(d=>{
    const el=document.getElementById(elid);
    if(!d.items) return el.innerHTML='<li>No hay noticias</li>';
    el.innerHTML=d.items.slice(0,3).map(i=>`<li><a href="${i.link}" target="_blank">${i.title}</a></li>`).join('');
  }).catch(_=>{document.getElementById(elid).innerHTML='<li>Error cargando</li>';});
}

function resetAll(){
  seleccionado='mapa'; tema=genero='';
  document.getElementById('resultado').classList.add('hidden');
  document.getElementById('stepGenero').classList.add('hidden');
  document.getElementById('stepTema').classList.add('hidden');
  document.getElementById('menu').classList.remove('hidden');
}
</script>
</body>
</html>
